<nz-layout class="dashboard">
  <div
    class="dashboard__sider"
    #refSider
    style="width: 250px"
    [class.show]="isCollapsedMobile"
  >
    <div class="dashboard__logo">
      <img
        class="dashboard__logo--image"
        width=""
        src="./assets/images/splashscreen.png"
        alt=""
      />
    </div>
    <ul nz-menu nzMode="inline" class="dashboard__menu">
      <li class="dashboard__menu__item" nz-submenu nzTitle="User" nzIcon="user">
        <ul>
          <li nz-menu-item>Tom</li>
          <li nz-menu-item>Bill</li>
          <li nz-menu-item>Alex</li>
        </ul>
      </li>
      <li class="dashboard__menu__item" nz-submenu nzTitle="Team" nzIcon="team">
        <ul>
          <li nz-menu-item>Team 1</li>
          <li nz-menu-item>Team 2</li>
        </ul>
      </li>
      <li class="dashboard__menu__item" nz-menu-item>
        <i nz-icon nzType="file"></i>
        <span>File</span>
      </li>
    </ul>
  </div>
  <nz-layout>
    <div
      [class.rotateIconHam]="isCollapsedMobile"
      [class.rotateIconReset]="!isCollapsedMobile"
      class="dashboard__header__mobile--icon"
      (click)="isCollapsedMobile = !isCollapsedMobile"
    >
      <button class="buttonTranparent hambuger">
        <svg class="icon icon-mobile">
          <use xlink:href="/assets/all.svg#hamburger"></use>
        </svg>
      </button>
    </div>
    <div
      class="dashboard__header__mobile--iconRight"
      (click)="isCollapsedMenuRight = !isCollapsedMenuRight"
    >
      <button class="buttonTranparent">
        <i
          [class.rotateIcon]="isCollapsedMenuRight"
          [class.rotateIconReset]="!isCollapsedMenuRight"
          nz-icon
          nzType="align-right"
          nzTheme="outline"
          style="font-size: 25px"
        ></i>
      </button>
    </div>
    <div class="dashboard__header__mobile">
      <div class="dashboard__header__mobile__logo">
        <img
          class="dashboard__logo--image"
          src="./assets/images/splashscreen.png"
          alt=""
        />
      </div>
    </div>
    <div
      class="dashboard__header__mobile__menu"
      [class.show]="isCollapsedMenuRight"
    >
      <div class="dashboard__header__mobile__menu__left">
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <svg class="icon icon-left">
              <use xlink:href="/assets/all.svg#email-circle"></use>
            </svg>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <span class="dashboard__header__mobile__menu___left--text">
              Order related inquiries including
            </span>
            <span class="dashboard__header__mobile__menu___left--text">
              how to use My Orders
            </span>
          </div>
        </div>
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <svg class="icon icon-left">
              <use xlink:href="/assets/all.svg#question-circle"></use>
            </svg>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <span class="dashboard__header__mobile__menu___left--text">
              Technical inquiries -
            </span>
            <span class="dashboard__header__mobile__menu___left--text">
              My Orders system or access issues
            </span>
          </div>
        </div>
      </div>
      <div class="dashboard__header__mobile__menu__right">
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <svg class="icon icon-left">
              <use xlink:href="/assets/all.svg#font-typo"></use>
            </svg>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <nz-select
              class="dashboard__header__mobile__menu__left--select"
              ngModel="Normal"
              nzBorderless="true"
              nzCustomContent="true"
            >
              <nz-option nzValue="Normal" nzLabel="Normal"></nz-option>
              <nz-option nzValue="1x" nzLabel="1x"></nz-option>
              <nz-option nzValue="2x" nzLabel="2x"></nz-option>
              <nz-option nzValue="3x" nzLabel="3x"></nz-option>
            </nz-select>
          </div>
        </div>
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <svg class="icon icon-left">
              <use xlink:href="/assets/all.svg#earth"></use>
            </svg>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <nz-select
              class="dashboard__header__mobile__menu__left--select"
              ngModel="English"
              nzBorderless="true"
              nzCustomContent="true"
            >
              <nz-option nzValue="English" nzLabel="English"></nz-option>
              <nz-option nzValue="Japan" nzLabel="Japan"></nz-option>
            </nz-select>
          </div>
        </div>
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <div class="dashboard__header__right__bellMobile">
              <svg class="icon icon-left" style="margin-right: 10px">
                <use xlink:href="/assets/all.svg#bell"></use>
              </svg>
              <div
                class="dashboard__header__right__bellMobile__notificationMobile"
              >
                10
              </div>
            </div>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <span class="dashboard__header__mobile__menu___left--text">
              {{ userProfile?.data?.fullName }}
            </span>
          </div>
        </div>
        <div class="dashboard__header__mobile__menu__left--children">
          <div class="dashboard__header__mobile__menu__left--icon">
            <div class="dashboard__header__right__avatar--nzAvatar">
              {{ userProfile?.data?.fullName?.substring(0, 1) }}
            </div>
          </div>
          <div class="dashboard__header__mobile__menu__left--string">
            <span class="dashboard__header__mobile__menu___left--text">
              {{ userProfile?.data?.fullName }}
            </span>
          </div>
        </div>
      </div>
    </div>
    <nz-header class="dashboard__header">
      <div class="dashboard__header__left">
        <ul class="dashboard__header__left--ul">
          <li class="dashboard__header__left--li">
            <span class="dashboard__header__left--icon">
              <svg class="icon icon-left">
                <use xlink:href="/assets/all.svg#email-circle"></use>
              </svg>
            </span>
            <span class="dashboard__header__left--string">
              <span class="dashboard__header__left--text">
                Order related inquiries including
              </span>
              <span class="dashboard__header__left--text">
                how to use My Orders
              </span>
            </span>
          </li>
          <li class="dashboard__header__left--li">
            <span class="dashboard__header__left--icon">
              <svg class="icon icon-left">
                <use xlink:href="/assets/all.svg#question-circle"></use>
              </svg>
            </span>
            <span class="dashboard__header__left--string">
              <span class="dashboard__header__left--text">
                Technical inquiries -
              </span>
              <span class="dashboard__header__left--text">
                My Orders system or access issues
              </span>
            </span>
          </li>
        </ul>
      </div>
      <div class="dashboard__header__right">
        <div class="dashboard__header__right__font">
          <svg class="icon icon-home">
            <use xlink:href="/assets/all.svg#font-typo"></use>
          </svg>
          <nz-select
            class="dashboard__header__right__select"
            ngModel="Normal"
            nzBorderless="true"
          >
            <nz-option nzValue="Normal" nzLabel="Normal"></nz-option>
            <nz-option nzValue="1x" nzLabel="1x"></nz-option>
            <nz-option nzValue="2x" nzLabel="2x"></nz-option>
            <nz-option nzValue="3x" nzLabel="3x"></nz-option>
          </nz-select>
        </div>
        <div class="dashboard__header__right__language">
          <svg class="icon icon-home">
            <use xlink:href="/assets/all.svg#earth"></use>
          </svg>
          <nz-select
            class="dashboard__header__right__select"
            ngModel="Normal"
            nzBorderless="true"
          >
            <nz-option nzValue="Normal" nzLabel="English"></nz-option>
            <nz-option nzValue="1x" nzLabel="Japan"></nz-option>
          </nz-select>
        </div>
        <button
          nz-popover
          [(nzPopoverVisible)]="openNotifycation"
          nzPopoverTrigger="click"
          [nzPopoverContent]="contentTemplate"
          nzPopoverPlacement="bottomRight"
          class="dashboard__header__right__bell buttonTranparent"
        >
          <svg class="icon icon-home">
            <use xlink:href="/assets/all.svg#bell"></use>
          </svg>
          <div
            *ngIf="countNotiUnRead != 0"
            class="dashboard__header__right__bell__notification"
          >
            {{ countNotiUnRead }}
          </div>
        </button>
        <ng-template #contentTemplate>
          <div class="dashboard-notification">
            <div class="dashboard-notification-title">
              <div class="dashboard-notification-title-left">
                <h2 class="dashboard-notification-title-text">Notifycation</h2>
                <div class="dashboard-notification-title-icon">
                  <i nz-icon nzType="sync" nzTheme="outline"></i>
                </div>
              </div>
              <div class="dashboard-notification-title-right">
                <svg class="icon" style="width: 15px; cursor: pointer">
                  <use xlink:href="/assets/all.svg#hamburger"></use>
                </svg>
              </div>
            </div>
            <div class="dashboard-notification-action">
              <button
                [class.activeNoti]="activeNotify == 1"
                (click)="handleNotifycationAll()"
                class="dashboard-notification-button"
              >
                All
              </button>
              <button
                [class.activeNoti]="activeNotify == 2"
                (click)="handleNotifycationRead()"
                class="dashboard-notification-button"
              >
                Read
              </button>
              <button
                [class.activeNoti]="activeNotify == 3"
                (click)="handleNotifycationUnRead()"
                class="dashboard-notification-button"
              >
                Unread
              </button>
            </div>
            <div
              class="dashboard-notification-message"
              infiniteScroll
              (scrolled)="onScroll()"
              [immediateCheck]="true"
              [scrollWindow]="false"
              #refScrollNoti
            >
              <!-- Message -->
              <div
                *ngFor="let notifyItem of notification?.data"
                class="dashboard-notification-message-children"
              >
                <div class="dashboard-notification-message-left">
                  <nz-badge
                    *ngIf="!notifyItem.hasAlreadyRead"
                    style="margin: 22px 10px 0 0"
                    nzColor="#108ee9"
                  ></nz-badge>
                  <span
                    *ngIf="notifyItem.hasAlreadyRead"
                    style="margin: 22px 10px 0 0; padding: 5px"
                  ></span>
                </div>
                <div class="dashboard-notification-message-right">
                  <div class="dashboard-notification-message-content">
                    {{ notifyItem.title }}
                  </div>
                  <div class="dashboard-notification-message-date">
                    {{ notifyItem.createdDate | date: "dd/MM/YYYY hh:mm:ss a" }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>

        <div class="dashboard__header__right__avatar">
          <button
            #refAvatar
            class="dashboard__header__right__avatar--nzAvatar buttonTranparent"
            (click)="handleOpenProfile()"
          >
            {{ userProfile?.data?.fullName?.substring(0, 1) }}
          </button>
          <div *ngIf="openProfile" class="dashboard-userInfoAv" #refPopup>
            <div class="dashboard-userInfoAv-header">
              <span class="dashboard-userInfoAv-header--text">
                Boston Scientific
              </span>
              <div class="dashboard-userInfoAv-header--signout">Sign out</div>
            </div>
            <div class="dashboard-userInfoAv-content">
              <div class="dashboard-userInfoAv-content-left">
                <div class="dashboard-userInfoAv__avatar" refAvatar>
                  {{ userProfile?.data?.fullName?.substring(0, 1) }}
                </div>
              </div>
              <div class="dashboard-userInfoAv-content-right">
                <div class="dashboard-userInfoAv-content-right-username">
                  {{ userProfile?.data?.fullName }}
                </div>
                <div class="dashboard-userInfoAv-content-right-text">
                  {{ userProfile?.data?.email }}
                </div>
                <div class="dashboard-userInfoAv-content-right-text">
                  <span style="margin-right: 5px">Role:</span>
                  {{ userProfile?.data?.role?.name }}
                </div>
              </div>
            </div>
            <div class="dashboard-userInfoAv-footer">
              <div class="dashboard-userInfoAv-footer--left"></div>
              <div class="dashboard-userInfoAv-footer--right">
                <div class="dashboard-userInfoAv-footer--text">
                  Change password
                </div>
                <div class="dashboard-userInfoAv-footer--text">
                  Switch account
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-header>
    <div class="dashboard__content">
      <div class="dashboard__content__main">
        <router-outlet></router-outlet>
      </div>
    </div>
    <!-- <nz-footer>Ant Design ©2020 Implement By Angular</nz-footer> -->
  </nz-layout>
</nz-layout>
